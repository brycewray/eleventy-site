let copyYear = new Date().getFullYear()
let svgNavIcon = `<svg width="18px" height="18px" class="inline mb-1" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g><g transform="matrix(0.37749,0,0,0.377441,10.2477,-17.2198)"><circle cx="20.536" cy="93.312" r="47.683" style="fill:rgb(0,136,255);"/></g><g transform="matrix(0.367503,0,0,0.453546,70.1767,-45.0477)"><g transform="matrix(79.6463,0,0,79.6463,-179.186,166.619)"><path d="M0.139,-0.628L0.135,-0.453C0.163,-0.486 0.197,-0.502 0.236,-0.502C0.286,-0.502 0.326,-0.479 0.356,-0.432C0.385,-0.385 0.4,-0.323 0.4,-0.244C0.4,-0.168 0.384,-0.106 0.353,-0.059C0.322,-0.011 0.281,0.013 0.232,0.013C0.193,0.013 0.162,-0.005 0.137,-0.04L0.137,-0.025C0.137,0 0.126,0.013 0.104,0.013C0.081,0.013 0.07,0 0.07,-0.026L0.07,-0.051L0.071,-0.079L0.068,-0.561C0.067,-0.58 0.065,-0.591 0.063,-0.596C0.06,-0.601 0.055,-0.603 0.046,-0.603L0.039,-0.603C0.023,-0.603 0.015,-0.613 0.015,-0.633C0.015,-0.657 0.025,-0.669 0.045,-0.669C0.051,-0.669 0.057,-0.668 0.063,-0.666C0.078,-0.663 0.085,-0.662 0.086,-0.662C0.088,-0.662 0.095,-0.663 0.107,-0.666C0.113,-0.668 0.118,-0.669 0.123,-0.669C0.134,-0.669 0.14,-0.661 0.14,-0.646L0.14,-0.638C0.139,-0.634 0.139,-0.631 0.139,-0.628ZM0.231,-0.434C0.168,-0.434 0.136,-0.372 0.136,-0.249C0.136,-0.12 0.167,-0.056 0.228,-0.056C0.259,-0.056 0.283,-0.073 0.302,-0.108C0.321,-0.143 0.33,-0.188 0.33,-0.244C0.33,-0.302 0.321,-0.348 0.304,-0.383C0.286,-0.417 0.262,-0.434 0.231,-0.434Z" style="fill:white;fill-rule:nonzero;"/></g><g transform="matrix(79.6463,0,0,79.6463,-149.159,166.619)"><path d="M0.15,-0.37L0.207,-0.087L0.268,-0.442C0.274,-0.477 0.29,-0.495 0.317,-0.495C0.332,-0.495 0.343,-0.491 0.35,-0.484C0.357,-0.477 0.362,-0.463 0.366,-0.442L0.436,-0.087L0.484,-0.363C0.487,-0.382 0.489,-0.397 0.489,-0.407C0.489,-0.422 0.482,-0.429 0.468,-0.429L0.466,-0.429C0.463,-0.429 0.459,-0.429 0.452,-0.428C0.435,-0.428 0.426,-0.439 0.426,-0.461C0.426,-0.484 0.435,-0.495 0.454,-0.495C0.463,-0.495 0.475,-0.493 0.492,-0.49C0.509,-0.487 0.522,-0.485 0.531,-0.485C0.54,-0.485 0.553,-0.487 0.569,-0.49C0.585,-0.493 0.597,-0.495 0.605,-0.495C0.624,-0.495 0.633,-0.484 0.633,-0.462C0.633,-0.441 0.621,-0.43 0.596,-0.43C0.583,-0.43 0.574,-0.423 0.567,-0.409C0.56,-0.395 0.552,-0.368 0.544,-0.327L0.489,-0.042C0.482,-0.005 0.464,0.013 0.436,0.013C0.409,0.013 0.392,-0.008 0.383,-0.051L0.317,-0.37L0.254,-0.042C0.247,-0.005 0.23,0.013 0.204,0.013C0.179,0.013 0.163,-0.005 0.154,-0.042L0.074,-0.38C0.069,-0.399 0.066,-0.41 0.064,-0.413C0.059,-0.424 0.05,-0.43 0.039,-0.43L0.036,-0.43L0.022,-0.429C0.015,-0.428 0.009,-0.432 0.004,-0.44C-0.001,-0.447 -0.004,-0.455 -0.004,-0.462C-0.004,-0.484 0.007,-0.495 0.028,-0.495C0.032,-0.495 0.043,-0.493 0.062,-0.49C0.072,-0.487 0.084,-0.486 0.098,-0.486C0.107,-0.486 0.121,-0.488 0.139,-0.491C0.156,-0.494 0.17,-0.495 0.179,-0.495C0.198,-0.495 0.208,-0.484 0.208,-0.463C0.208,-0.44 0.198,-0.429 0.178,-0.429L0.165,-0.429C0.152,-0.429 0.145,-0.422 0.145,-0.407C0.145,-0.399 0.147,-0.387 0.15,-0.37Z" style="fill:white;fill-rule:nonzero;"/></g></g></g></svg>`
let svgFooterIcon = `<svg width="45px" height="45px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g><g transform="matrix(0.37749,0,0,0.377441,10.2477,-17.2198)"><circle cx="20.536" cy="93.312" r="47.683" style="fill:rgb(0,136,255);"/></g><g transform="matrix(0.367503,0,0,0.453546,70.1767,-45.0477)"><g transform="matrix(79.6463,0,0,79.6463,-179.186,166.619)"><path d="M0.139,-0.628L0.135,-0.453C0.163,-0.486 0.197,-0.502 0.236,-0.502C0.286,-0.502 0.326,-0.479 0.356,-0.432C0.385,-0.385 0.4,-0.323 0.4,-0.244C0.4,-0.168 0.384,-0.106 0.353,-0.059C0.322,-0.011 0.281,0.013 0.232,0.013C0.193,0.013 0.162,-0.005 0.137,-0.04L0.137,-0.025C0.137,0 0.126,0.013 0.104,0.013C0.081,0.013 0.07,0 0.07,-0.026L0.07,-0.051L0.071,-0.079L0.068,-0.561C0.067,-0.58 0.065,-0.591 0.063,-0.596C0.06,-0.601 0.055,-0.603 0.046,-0.603L0.039,-0.603C0.023,-0.603 0.015,-0.613 0.015,-0.633C0.015,-0.657 0.025,-0.669 0.045,-0.669C0.051,-0.669 0.057,-0.668 0.063,-0.666C0.078,-0.663 0.085,-0.662 0.086,-0.662C0.088,-0.662 0.095,-0.663 0.107,-0.666C0.113,-0.668 0.118,-0.669 0.123,-0.669C0.134,-0.669 0.14,-0.661 0.14,-0.646L0.14,-0.638C0.139,-0.634 0.139,-0.631 0.139,-0.628ZM0.231,-0.434C0.168,-0.434 0.136,-0.372 0.136,-0.249C0.136,-0.12 0.167,-0.056 0.228,-0.056C0.259,-0.056 0.283,-0.073 0.302,-0.108C0.321,-0.143 0.33,-0.188 0.33,-0.244C0.33,-0.302 0.321,-0.348 0.304,-0.383C0.286,-0.417 0.262,-0.434 0.231,-0.434Z" style="fill:white;fill-rule:nonzero;"/></g><g transform="matrix(79.6463,0,0,79.6463,-149.159,166.619)"><path d="M0.15,-0.37L0.207,-0.087L0.268,-0.442C0.274,-0.477 0.29,-0.495 0.317,-0.495C0.332,-0.495 0.343,-0.491 0.35,-0.484C0.357,-0.477 0.362,-0.463 0.366,-0.442L0.436,-0.087L0.484,-0.363C0.487,-0.382 0.489,-0.397 0.489,-0.407C0.489,-0.422 0.482,-0.429 0.468,-0.429L0.466,-0.429C0.463,-0.429 0.459,-0.429 0.452,-0.428C0.435,-0.428 0.426,-0.439 0.426,-0.461C0.426,-0.484 0.435,-0.495 0.454,-0.495C0.463,-0.495 0.475,-0.493 0.492,-0.49C0.509,-0.487 0.522,-0.485 0.531,-0.485C0.54,-0.485 0.553,-0.487 0.569,-0.49C0.585,-0.493 0.597,-0.495 0.605,-0.495C0.624,-0.495 0.633,-0.484 0.633,-0.462C0.633,-0.441 0.621,-0.43 0.596,-0.43C0.583,-0.43 0.574,-0.423 0.567,-0.409C0.56,-0.395 0.552,-0.368 0.544,-0.327L0.489,-0.042C0.482,-0.005 0.464,0.013 0.436,0.013C0.409,0.013 0.392,-0.008 0.383,-0.051L0.317,-0.37L0.254,-0.042C0.247,-0.005 0.23,0.013 0.204,0.013C0.179,0.013 0.163,-0.005 0.154,-0.042L0.074,-0.38C0.069,-0.399 0.066,-0.41 0.064,-0.413C0.059,-0.424 0.05,-0.43 0.039,-0.43L0.036,-0.43L0.022,-0.429C0.015,-0.428 0.009,-0.432 0.004,-0.44C-0.001,-0.447 -0.004,-0.455 -0.004,-0.462C-0.004,-0.484 0.007,-0.495 0.028,-0.495C0.032,-0.495 0.043,-0.493 0.062,-0.49C0.072,-0.487 0.084,-0.486 0.098,-0.486C0.107,-0.486 0.121,-0.488 0.139,-0.491C0.156,-0.494 0.17,-0.495 0.179,-0.495C0.198,-0.495 0.208,-0.484 0.208,-0.463C0.208,-0.44 0.198,-0.429 0.178,-0.429L0.165,-0.429C0.152,-0.429 0.145,-0.422 0.145,-0.407C0.145,-0.399 0.147,-0.387 0.15,-0.37Z" style="fill:white;fill-rule:nonzero;"/></g></g></g></svg>` 

module.exports = function (data) {
  return `
<!DOCTYPE html>
<html lang="en" class="font-body dark:bg-black">
  <head>
    <meta name="generator" content="Eleventy - https://11ty.dev" />
        
    ${
      (data.title == "Home page")
      ? `
      <title>${data.siteparams.siteTitle}</title> 
      <meta property="og:title" content="${data.siteparams.siteTitle}" />
      `
      : `
      <title>${data.title} | ${data.siteparams.siteTitle}</title>
      <meta property="og:title" content="${data.title} | ${data.siteparams.siteTitle}" />
      `
    }

    <!-- IndieWeb -->
    ${
      (data.title == "Home page")
      ? `
      <link rel="me" href="https://twitter.com/BryceWrayTX" />
      <link rel="me" href="https://github.com/brycewray" />
      `
      : ``
    }
    <link rel="webmention" href="https://webmention.io/brycewray.com/webmention" />
    <link rel="pingback" href="https://webmention.io/brycewray.com/xmlrpc" />

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:image" content="https://brycewray.com/images/typewriter-monochrome_2242164_1280x720-1280.jpg" />

    ${
      (data.title == "Home page")
      ? `
      <meta name="description" content="${data.siteparams.siteDescription}" />
      <meta property="og:description" content="${data.siteparams.siteDescription}" />
      `
      : (data.description != "")
        ? `
      <meta name="description" content="${data.description}">
        `
      : ``
    }

    ${
      (data.page.url !== null)
      ? `
      <meta property="og:url" content="${data.siteparams.siteURLforOG}${data.page.url}" />
      `
      : `<meta property="og:url" content="${data.siteparams.siteURLforOG}" />`
    }

    <!-- Twitter meta -->
    <meta name="twitter:site" content="@BryceWrayTX">
    <meta name="twitter:creator" content="@BryceWrayTX">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="https://brycewray.com/images/typewriter-monochrome_2242164_1280x720-1280.jpg" />
    ${
      data.title !== "Home page"
      ? `
      <meta name="twitter:description" content="${data.description}" />
      <meta name="twitter:title" content="${data.title}" />
      `
      : `
      <meta name="twitter:description" content="${data.siteparams.siteDescription}" />
      <meta name="twitter:title" content="${data.siteparams.siteTitle}" />
      `
    }

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
    <meta name="msapplication-TileImage" content="/images/ms-icon-icons/144x144.png">

    <link rel="preload" as="style" href="/css/index.css" />
    <link rel="stylesheet" href="/css/index.css" type="text/css" />
    <style>@-moz-document url-prefix() {.lazy:-moz-loading {visibility:hidden;}}.ieOnly {display: none;}@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {.ieOnly {display: block;}}</style>

    <noscript>
      <!-- Dark mode for Twitter items if browser blocks JS at bottom; it’s debatable whether it’s needed since non-JS Twitter is pretty spare and mostly adheres to other CSS, but we’ll do it just to be consistent -->
      <meta name="twitter:widgets:theme" content="dark">
      <meta name="twitter:widgets:link-color" content="#00bbff">
    </noscript>
  </head>
  <body>
    <p class="ieOnly text-center">Sorry, this site&rsquo;s CSS&mdash;and many others&rsquo;&mdash;no longer fully supports Internet&nbsp;Explorer.</p>
    <header class="h-12 bg-blue-700 w-full fixed p-0 mt-0 z-50">
      <p class="text-white font-bold mt-2 pt-1 text-lg ml-4 md:ml-8 lg:ml-10 w-full"><span class="site-logo-holder"><a href="/" class="text-white no-underline border-b-0 active:text-gray-400 hover:text-gray-400" aria-label="This site's “BW” logo">${svgNavIcon}</a></span>&nbsp;&nbsp;<a href="/" class="text-white active:text-gray-400 hover:text-gray-400" style="border: 0 !important; text-decoration: none !important;">BryceWray.com</a></p>
      <input type="checkbox" id="nav-toggle" class="nav-toggle" aria-hidden="true" />
      <label for="nav-toggle" class="nav__icon" aria-hidden="true">
        Expand the menu
          <span class="nav__icon-line"></span>
          <span class="nav__icon-line"></span>
          <span class="nav__icon-line"></span>
      </label>
      <nav role="navigation" class="nav">
        <ul class="nav__items">
          <li class="nav__item">
            <a href="/about" title="About">About</a>
          </li>
          <li class="nav__item">
            <a href="/posts" title="Posts">Posts</a>
          </li>
        </ul>
      </nav>
    </header>
    ${data.content}
    <footer class="text-center pb-6">
      <div class="w-5/6 md:w-3/4 lg:w-2/3 mx-auto">
        <p class="text-xs inline-flex mt-4 mb-4"><a href="https://github.com/brycewray/eleventy_solo" target="_blank" rel="noopener" class="mb-0 border-transparent" aria-label="GitHub"><img data-src="/images/icons/GitHub_octocat_logo_blue_96x96.png" class="lazy" style="height: 48px; width: 48px;" alt="This site's GitHub repository"></a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://twitter.com/BryceWrayTX" target="_blank" rel="noopener" class="mb-0 border-transparent" aria-label="Twitter"><img data-src="/images/icons/twitter-2430933_circle_96x96.png" class="lazy" style="height: 48px; width: 48px;" alt="My Twitter account"></a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://www.linkedin.com/in/brycewray" target="_blank" rel="noopener" class="mb-0 border-transparent" aria-label="LinkedIn"><img data-src="/images/icons/linked-in-2674741_circle_96x96.png" class="lazy" style="height: 48px; width: 48px;" alt="My LinkedIn account"></a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/feed.xml" class="mb-0 border-transparent" aria-label="RSS"><img data-src="/images/icons/rss-2440955_circle_96x96.png" class="lazy" style="height: 48px; width:48px;" alt="This site's RSS feed"></a></p>
        <p class="text-xs">
          &copy;&nbsp;${copyYear}&nbsp;<a class="h-card" rel="me" href="https://brycewray.com">Bryce Wray</a>.<br />
          Site built and managed with <a href="https://jamstack.org" target="_blank" rel="noopener">the Jamstack</a>, <a href="https://11ty.dev" target="_blank" rel="noopener">Eleventy</a>, <a href="https://tailwindcss.com/" target="_blank" rel="noopener">Tailwind CSS</a>, <a href="https://www.apple.com/macos" target="_blank" rel="noopener">macOS</a>, <a href="https://www.apple.com/ios" target="_blank" rel="noopener">iOS</a>, <a href="https://daringfireball.net/projects/markdown" target="_blank" rel="noopener">Markdown</a>, <span class="text-nowrap">time, and&nbsp;love.</span> <span class="text-nowrap">Hosted by&nbsp;<a href="https://netlify.com" target="_blank" rel="noopener">Netlify</a></span>.
        </p>
      </div>
      <!-- for webmentions -->
      <hr class="mt-8 border-black" />
      <div class="w-5/6 md:w-3/4 lg:w-2/3 mx-auto">
        <p class="font-bold text-base tracking-tight mt-4 mb-2">Information for webmentions</p>
        <p class="inline-flex mt-0">${svgFooterIcon}</p>
        <p class="p-note text-xs leading-tight mt-0">Unrepentant advocate for and user of the Oxford comma (sorry,&nbsp;AP). Webmentions&nbsp;of others&rsquo; content do&nbsp;not necessarily constitute endorsements. Comments&nbsp;and&nbsp;opinions expressed herein are my&nbsp;own, unless otherwise&nbsp;noted.</p>
        ${data.title !="Posts"
        ? `<p class="font-bold text-center text-sm mt-4 mb-0 tracking-tight">About this page</p>
        <article class="h-entry text-xs leading-tight">
          <div class="e-content p-name">
          ${data.title}
            ${data.subtitle 
              ? `&nbsp;&nbsp;|&nbsp;&nbsp;${data.subtitle}`
              : ``
            }
            ${data.description 
              ? `&nbsp;&nbsp;|&nbsp;&nbsp;${data.description}`
              : ``
          }
          </div>
          <a class="u-url no-underline border-0 text-black dark:text-white tracking-normal" href="${data.page.url}">Published <time class="dt-published">${this.dateFromRFC2822(data.page.date)}</time>
          </a>
          <link rel="author" href="https://brycewray.com/" />
        </article>`
        : ``
        }
      </div>
    </footer>    
    <script src="/assets/js/flying-pages.min.js" defer></script>
    <script src="/assets/js/twitterMeta.min.js" defer></script>
    <script src="/assets/js/lazyload.min.js"></script>

    <script>
      var lazyLoadInstance = new LazyLoad({
        elements_selector: ".lazy",
        cancel_on_exit: true,
        // ... more custom settings?
      })
    </script>
  </body>
</html>
  `
}
